'use client'
import { useState } from "react";

export function Card ({ type, number, owner, expiration_date, ccv, canFlip = false, size = "medium", className }) {
  const [flip, setFlip] = useState(false);

  const sizes = {
    small: { w: '223.5px', h: '122.5px' },
    medium: { w: '335.25px', h: '183.75px' },
    large: { w: '420px', h: '218px' }
  }

  const toggleCardFlip = () => { if (canFlip) setFlip(!flip) };

  return (
    <div className={`cursor-pointer ${className ?? 'relative'}`} style={{ perspective: '1000px', width: sizes[size].w, height: sizes[size].h }} onClick={toggleCardFlip}>
      <div className="relative w-full h-full duration-700" style={{ transformStyle: 'preserve-3d', transform: flip ? 'rotateY(180deg)' : 'rotateY(0deg)' }}>
        <div className="absolute w-full h-full select-none" style={{ backfaceVisibility: 'hidden' }}>
          <svg width={sizes[size].w} height={sizes[size].h} viewBox="0 0 447 245" onClick={toggleCardFlip}>
            <path className="fill-metalicGray" d="M0,235V10C0,4.48,4.48,0,10,0h427c5.52,0,10,4.48,10,10v225c0,5.52-4.48,10-10,10H10C4.48,245,0,240.52,0,235z" />
            <g>
              <path id="_x3C_Compound_Path_x3E__00000074415965102334327480000017635365701487522697_" className="fill-white" d="M308.01,22.05
			l-37.64,21.84c-0.29,0.17-0.46,0.47-0.46,0.8v43.18c0,0.33,0.18,0.64,0.46,0.8l37.65,21.94c0.29,0.17,0.64,0.17,0.93,0
			l37.69-21.54c0.29-0.17,0.47-0.47,0.47-0.81V44.69c0-0.33-0.18-0.64-0.46-0.8l-37.69-21.84C308.65,21.88,308.3,21.88,308.01,22.05
			z M308.92,38.65l20.55,11.06c0.65,0.35,0.65,1.28,0,1.64L308.92,62.5c-0.28,0.15-0.61,0.15-0.89,0l-20.5-11.15
			c-0.65-0.35-0.65-1.29,0-1.64l20.5-11.06C308.31,38.5,308.64,38.5,308.92,38.65z M288.33,56.92l19.71,10.21
			c0.27,0.14,0.59,0.14,0.86,0l19.27-10.21c0.28-0.15,0.62-0.14,0.89,0.01l6.32,3.55c0.63,0.36,0.63,1.27-0.01,1.62l-26.45,14.65
			c-0.28,0.16-0.62,0.16-0.9,0l-26.45-14.67c-0.63-0.35-0.64-1.24-0.03-1.61l5.87-3.52C287.7,56.78,288.04,56.77,288.33,56.92z
			 M308.04,90.95l-33.26-17.37c-0.65-0.34-0.67-1.26-0.04-1.63l7.44-4.33c0.28-0.16,0.62-0.17,0.9-0.02l24.96,13.08
			c0.27,0.14,0.59,0.14,0.86,0l24.91-13.09c0.28-0.15,0.62-0.14,0.9,0.02l7.53,4.34c0.64,0.37,0.62,1.29-0.03,1.63l-33.3,17.37
			C308.64,91.09,308.31,91.09,308.04,90.95z" />
              <path className="fill-white" d="M398.09,66.88c1.74,2.24,2.61,4.79,2.61,7.66c0,4.14-1.45,7.42-4.34,9.84c-2.89,2.42-6.93,3.63-12.1,3.63
			h-23.07V38.48h22.3c5.03,0,8.97,1.15,11.82,3.46c2.84,2.31,4.27,5.43,4.27,9.38c0,2.92-0.76,5.34-2.29,7.27
			c-1.53,1.93-3.56,3.27-6.1,4.02C394.04,63.22,396.35,64.64,398.09,66.88z M373.25,58.52h7.9c1.98,0,3.49-0.43,4.55-1.31
			c1.06-0.87,1.59-2.15,1.59-3.85c0-1.69-0.53-2.99-1.59-3.88c-1.06-0.89-2.58-1.34-4.55-1.34h-7.9V58.52z M386.83,76.9
			c1.1-0.92,1.66-2.25,1.66-3.99c0-1.74-0.58-3.1-1.73-4.09c-1.15-0.99-2.74-1.48-4.76-1.48h-8.75v10.94h8.89
			C384.16,78.27,385.73,77.82,386.83,76.9z" />
              <path className="fill-white" d="M407.58,57.6c1.53-3.06,3.61-5.41,6.25-7.06c2.63-1.65,5.57-2.47,8.82-2.47c2.78,0,5.21,0.56,7.3,1.69
			c2.09,1.13,3.7,2.61,4.83,4.45v-5.57h12.07v39.37h-12.07v-5.57c-1.18,1.83-2.81,3.32-4.9,4.45c-2.09,1.13-4.53,1.69-7.3,1.69
			c-3.2,0-6.12-0.83-8.75-2.5c-2.63-1.67-4.72-4.04-6.25-7.13c-1.53-3.08-2.29-6.64-2.29-10.69
			C405.29,64.21,406.05,60.66,407.58,57.6z M432.28,61.2c-1.67-1.74-3.7-2.61-6.1-2.61s-4.43,0.86-6.1,2.58
			c-1.67,1.72-2.5,4.08-2.5,7.09c0,3.01,0.83,5.4,2.5,7.16c1.67,1.76,3.7,2.65,6.1,2.65s4.43-0.87,6.1-2.61
			c1.67-1.74,2.5-4.12,2.5-7.13S433.95,62.94,432.28,61.2z" />
            </g>
            <g className="[&>text]:font-poppins [&>text]:fill-white [&>text]:text-lg">
              <text transform="matrix(1 0 0 1 15 25)" className="!text-sm">{type}</text>
              <text transform="matrix(1 0 0 1 106.1233 155)" className="font-medium tracking-[0.15em]">{number}</text>
              <text transform="matrix(1 0 0 1 58.0361 197)" className="uppercase">{owner}</text>
              <text transform="matrix(1 0 0 1 320 197)" className="">{expiration_date}</text>
            </g>
          </svg>
        </div>

        <div className="absolute w-full h-full select-none" style={{ transform: 'rotateY(180deg)', backfaceVisibility: 'hidden' }}>
          <svg width={sizes[size].w} height={sizes[size].h} viewBox="0 0 447 245" onClick={toggleCardFlip}>
            <g>
              <path className="fill-gray-200" d="M0,235V10C0,4.48,4.48,0,10,0h427c5.52,0,10,4.48,10,10v225c0,5.52-4.48,10-10,10H10
				C4.48,245,0,240.52,0,235z"/>
              <path className="fill-gray-400" d="M232.51,185.9c0,0.55-0.22,1.05-0.58,1.41c-0.37,0.37-0.87,0.59-1.42,0.59h-56.18c-1.1,0-2-0.9-2-2
					s0.9-2,2-2h56.18C231.62,183.9,232.51,184.8,232.51,185.9z"/>
              <path className="fill-gray-400" d="M273.37,174.9c0,0.55-0.22,1.05-0.58,1.41c-0.37,0.37-0.87,0.59-1.42,0.59h-18.04c-1.1,0-2-0.9-2-2
					s0.9-2,2-2h18.04C272.48,172.9,273.37,173.8,273.37,174.9z"/>
              <path className="fill-gray-400" d="M245.58,174.9c0,0.55-0.22,1.05-0.58,1.41c-0.36,0.37-0.86,0.59-1.42,0.59H132.83c-1.1,0-2-0.9-2-2
					s0.9-2,2-2h110.75C244.69,172.9,245.58,173.8,245.58,174.9z"/>
              <path className="fill-gray-400" d="M201.83,196.9L201.83,196.9c0-1.1,0.9-2,2-2h110.75c1.1,0,2,0.9,2,2l0,0c0,1.1-0.9,2-2,2H203.83
					C202.73,198.9,201.83,198,201.83,196.9z"/>
              <path className="fill-gray-400" d="M238.33,185.9L238.33,185.9c0-1.1,0.9-2,2-2h41.91c1.1,0,2,0.9,2,2l0,0c0,1.1-0.9,2-2,2h-41.91
					C239.23,187.9,238.33,187,238.33,185.9z"/>
              <path className="fill-gray-400" d="M279.33,174.9L279.33,174.9c0-1.1,0.9-2,2-2h18.04c1.1,0,2,0.9,2,2l0,0c0,1.1-0.9,2-2,2h-18.04
					C280.23,176.9,279.33,176,279.33,174.9z"/>
              <path className="fill-gray-400" d="M144.33,185.9L144.33,185.9c0-1.1,0.9-2,2-2h18.04c1.1,0,2,0.9,2,2l0,0c0,1.1-0.9,2-2,2h-18.04
					C145.23,187.9,144.33,187,144.33,185.9z"/>
              <path className="fill-gray-400" d="M145.33,196.9L145.33,196.9c0-1.1,0.9-2,2-2h18.04c1.1,0,2,0.9,2,2l0,0c0,1.1-0.9,2-2,2h-18.04
					C146.23,198.9,145.33,198,145.33,196.9z"/>
              <path className="fill-gray-400" d="M173.33,196.9L173.33,196.9c0-1.1,0.9-2,2-2h18.04c1.1,0,2,0.9,2,2l0,0c0,1.1-0.9,2-2,2h-18.04
					C174.23,198.9,173.33,198,173.33,196.9z"/>
              <path className="fill-gray-400" d="M290.35,185.9L290.35,185.9c0-1.1,0.9-2,2-2h5.21c1.1,0,2,0.9,2,2l0,0c0,1.1-0.9,2-2,2h-5.21
					C291.25,187.9,290.35,187,290.35,185.9z"/>
              <path className="fill-gray-400" d="M307.38,174.9L307.38,174.9c0-1.1,0.9-2,2-2h5.21c1.1,0,2,0.9,2,2l0,0c0,1.1-0.9,2-2,2h-5.21
					C308.27,176.9,307.38,176,307.38,174.9z"/>
              <path className="fill-gray-400" d="M130.42,196.9L130.42,196.9c0-1.1,0.9-2,2-2h5.21c1.1,0,2,0.9,2,2l0,0c0,1.1-0.9,2-2,2h-5.21
					C131.31,198.9,130.42,198,130.42,196.9z"/>
              <path className="fill-gray-400" d="M38.34,136.5v-28c0-2.76,2.24-5,5-5h351c2.76,0,5,2.24,5,5v28c0,2.76-2.24,5-5,5h-351
				C40.58,141.5,38.34,139.26,38.34,136.5z"/>
              <rect y="19.5" className="fill-gray-900" width="447" height="54" />
            </g>
            <text transform="matrix(1 0 0 1 353.9409 130.1129)" className="fill-gray-200 font-poppins text-lg tracking-wide">{ccv}</text>
          </svg>
        </div>
      </div>
    </div>
  )
}